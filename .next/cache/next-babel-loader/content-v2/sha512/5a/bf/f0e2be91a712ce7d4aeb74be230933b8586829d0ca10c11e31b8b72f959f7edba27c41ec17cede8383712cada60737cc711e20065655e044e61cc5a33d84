{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/raudipra/Documents/Projects/Portfolio/portfolio-cms-fe/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/raudipra/Documents/Projects/Portfolio/portfolio-cms-fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/raudipra/Documents/Projects/Portfolio/portfolio-cms-fe/components/Forms/ImageUploader.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, DependencyList } from 'react';\nimport ReactCrop, { centerCrop, makeAspectCrop, Crop, PixelCrop } from 'react-image-crop';\nimport { Input, Row, Col } from \"reactstrap\";\nimport { canvasPreview } from './canvasPreview';\nimport 'react-image-crop/dist/ReactCrop.css'; // This is to demonstate how to make and center a % aspect crop\n// which is a bit trickier so we use some helper functions.\n\nfunction centerAspectCrop(mediaWidth, mediaHeight, aspect) {\n  return centerCrop(makeAspectCrop({\n    unit: '%',\n    width: 90\n  }, aspect, mediaWidth, mediaHeight), mediaWidth, mediaHeight);\n}\n\nfunction useDebounceEffect(fn, waitTime, deps) {\n  _s();\n\n  useEffect(function () {\n    var t = setTimeout(function () {\n      fn.apply(undefined, deps);\n    }, waitTime);\n    return function () {\n      clearTimeout(t);\n    };\n  }, deps);\n}\n\n_s(useDebounceEffect, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\nfunction ImageUploader() {\n  _s2();\n\n  var _useState = useState(''),\n      imgSrc = _useState[0],\n      setImgSrc = _useState[1];\n\n  var previewCanvasRef = useRef(null);\n  var imgRef = useRef(null);\n\n  var _useState2 = useState(),\n      crop = _useState2[0],\n      setCrop = _useState2[1];\n\n  var _useState3 = useState(),\n      completedCrop = _useState3[0],\n      setCompletedCrop = _useState3[1];\n\n  var _useState4 = useState(1),\n      scale = _useState4[0],\n      setScale = _useState4[1];\n\n  var _useState5 = useState(0),\n      rotate = _useState5[0],\n      setRotate = _useState5[1];\n\n  var _useState6 = useState(16 / 9),\n      aspect = _useState6[0],\n      setAspect = _useState6[1]; // Useful resource: https://bbbootstrap.com/snippets/image-drag-and-drop-upload-using-tailwind-css-remove-option-76647320#\n\n\n  function onSelectFile(e) {\n    if (e.target.files && e.target.files.length > 0) {\n      setCrop(undefined); // Makes crop preview update between images.\n\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        var _reader$result;\n\n        return setImgSrc(((_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString()) || '');\n      });\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  }\n\n  function onImageLoad(e) {\n    if (aspect) {\n      var _e$currentTarget = e.currentTarget,\n          width = _e$currentTarget.width,\n          height = _e$currentTarget.height;\n      setCrop(centerAspectCrop(width, height, aspect));\n    }\n  }\n\n  useDebounceEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (completedCrop !== null && completedCrop !== void 0 && completedCrop.width && completedCrop !== null && completedCrop !== void 0 && completedCrop.height && imgRef.current && previewCanvasRef.current) {\n              // We use canvasPreview as it's much faster than imgPreview.\n              canvasPreview(imgRef.current, previewCanvasRef.current, completedCrop, scale, rotate);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), 100, [completedCrop, scale, rotate]);\n\n  function handleToggleAspectClick() {\n    if (aspect) {\n      setAspect(undefined);\n    } else if (imgRef.current) {\n      var _imgRef$current = imgRef.current,\n          width = _imgRef$current.width,\n          height = _imgRef$current.height;\n      setAspect(16 / 9);\n      setCrop(centerAspectCrop(width, height, 16 / 9));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Crop-Controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 md:w-auto rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-32 w-full overflow-hidden relative shadow-md border-2 items-center rounded-md cursor-pointer   border-gray-400 border-dotted\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: onSelectFile,\n            className: \"h-full w-full opacity-0 z-10 absolute\",\n            name: \"files[]\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-full w-full bg-gray-200 absolute z-1 flex justify-center items-center top-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"mdi mdi-folder-open text-[30px] text-gray-400 text-center\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-[12px]\",\n                children: \"Drag and Drop a file\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pl-lg-4\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"scale-input\",\n                children: \"Scale: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"scale-input\",\n                type: \"number\",\n                step: \"0.1\",\n                value: scale,\n                disabled: !imgSrc,\n                onChange: function onChange(e) {\n                  return setScale(Number(e.target.value));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"rotate-input\",\n                children: \"Rotate: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"rotate-input\",\n                type: \"number\",\n                value: rotate,\n                disabled: !imgSrc,\n                onChange: function onChange(e) {\n                  return setRotate(Math.min(180, Math.max(-180, Number(e.target.value))));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                \"class\": \"mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: \"Aspect Ratio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                \"class\": \"custom-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: aspect,\n                  onClick: handleToggleAspectClick\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"class\": \"custom-toggle-slider rounded-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: \"6\",\n            children: !!imgSrc && /*#__PURE__*/_jsxDEV(ReactCrop, {\n              crop: crop,\n              onChange: function onChange(_, percentCrop) {\n                return setCrop(percentCrop);\n              },\n              onComplete: function onComplete(c) {\n                return setCompletedCrop(c);\n              },\n              aspect: aspect,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                ref: imgRef,\n                alt: \"Crop me\",\n                src: imgSrc,\n                style: {\n                  transform: \"scale(\".concat(scale, \") rotate(\").concat(rotate, \"deg)\")\n                },\n                onLoad: onImageLoad\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: !!completedCrop && /*#__PURE__*/_jsxDEV(\"canvas\", {\n                ref: previewCanvasRef,\n                style: {\n                  border: '1px solid black',\n                  objectFit: 'contain',\n                  width: completedCrop.width,\n                  height: completedCrop.height\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(ImageUploader, \"ixgqlcT4aC8pBj+vq7sC6DvZIKs=\", false, function () {\n  return [useDebounceEffect];\n});\n\n_c = ImageUploader;\nexport default ImageUploader;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUploader\");","map":{"version":3,"sources":["/Users/raudipra/Documents/Projects/Portfolio/portfolio-cms-fe/components/Forms/ImageUploader.js"],"names":["React","useState","useRef","useEffect","DependencyList","ReactCrop","centerCrop","makeAspectCrop","Crop","PixelCrop","Input","Row","Col","canvasPreview","centerAspectCrop","mediaWidth","mediaHeight","aspect","unit","width","useDebounceEffect","fn","waitTime","deps","t","setTimeout","apply","undefined","clearTimeout","ImageUploader","imgSrc","setImgSrc","previewCanvasRef","imgRef","crop","setCrop","completedCrop","setCompletedCrop","scale","setScale","rotate","setRotate","setAspect","onSelectFile","e","target","files","length","reader","FileReader","addEventListener","result","toString","readAsDataURL","onImageLoad","currentTarget","height","current","handleToggleAspectClick","Number","value","Math","min","max","_","percentCrop","c","transform","border","objectFit"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,EAA6CC,cAA7C,QAAmE,OAAnE;AACA,OAAOC,SAAP,IACEC,UADF,EAEEC,cAFF,EAGEC,IAHF,EAIEC,SAJF,QAKO,kBALP;AAMA,SACEC,KADF,EAEEC,GAFF,EAGEC,GAHF,QAIO,YAJP;AAKA,SAASC,aAAT,QAA8B,iBAA9B;AAEA,OAAO,qCAAP,C,CAEA;AACA;;AACA,SAASC,gBAAT,CAA0BC,UAA1B,EAAsCC,WAAtC,EAAmDC,MAAnD,EAA2D;AACzD,SAAOX,UAAU,CACfC,cAAc,CACZ;AACEW,IAAAA,IAAI,EAAE,GADR;AAEEC,IAAAA,KAAK,EAAE;AAFT,GADY,EAKZF,MALY,EAMZF,UANY,EAOZC,WAPY,CADC,EAUfD,UAVe,EAWfC,WAXe,CAAjB;AAaD;;AAED,SAASI,iBAAT,CAA2BC,EAA3B,EAA+BC,QAA/B,EAAyCC,IAAzC,EAA+C;AAAA;;AAC7CpB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMqB,CAAC,GAAGC,UAAU,CAAC,YAAM;AACzBJ,MAAAA,EAAE,CAACK,KAAH,CAASC,SAAT,EAAoBJ,IAApB;AACD,KAFmB,EAEjBD,QAFiB,CAApB;AAIA,WAAO,YAAM;AACXM,MAAAA,YAAY,CAACJ,CAAD,CAAZ;AACD,KAFD;AAGD,GARQ,EAQND,IARM,CAAT;AASD;;GAVQH,iB;;AAYT,SAASS,aAAT,GAAyB;AAAA;;AAAA,kBACK5B,QAAQ,CAAC,EAAD,CADb;AAAA,MAChB6B,MADgB;AAAA,MACRC,SADQ;;AAEvB,MAAMC,gBAAgB,GAAG9B,MAAM,CAAC,IAAD,CAA/B;AACA,MAAM+B,MAAM,GAAG/B,MAAM,CAAC,IAAD,CAArB;;AAHuB,mBAICD,QAAQ,EAJT;AAAA,MAIhBiC,IAJgB;AAAA,MAIVC,OAJU;;AAAA,mBAKmBlC,QAAQ,EAL3B;AAAA,MAKhBmC,aALgB;AAAA,MAKDC,gBALC;;AAAA,mBAMGpC,QAAQ,CAAC,CAAD,CANX;AAAA,MAMhBqC,KANgB;AAAA,MAMTC,QANS;;AAAA,mBAOKtC,QAAQ,CAAC,CAAD,CAPb;AAAA,MAOhBuC,MAPgB;AAAA,MAORC,SAPQ;;AAAA,mBAQKxC,QAAQ,CAAC,KAAK,CAAN,CARb;AAAA,MAQhBgB,MARgB;AAAA,MAQRyB,SARQ,kBAUxB;;;AAEC,WAASC,YAAT,CAAsBC,CAAtB,EAAyB;AACvB,QAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,IAAkBF,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,MAAf,GAAwB,CAA9C,EAAiD;AAC/CZ,MAAAA,OAAO,CAACR,SAAD,CAAP,CAD+C,CAC5B;;AACnB,UAAMqB,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,MAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC;AAAA;;AAAA,eAC9BnB,SAAS,CAAC,mBAAAiB,MAAM,CAACG,MAAP,kEAAeC,QAAf,OAA6B,EAA9B,CADqB;AAAA,OAAhC;AAGAJ,MAAAA,MAAM,CAACK,aAAP,CAAqBT,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB;AACD;AACF;;AAED,WAASQ,WAAT,CAAqBV,CAArB,EAAwB;AACtB,QAAI3B,MAAJ,EAAY;AAAA,6BACgB2B,CAAC,CAACW,aADlB;AAAA,UACFpC,KADE,oBACFA,KADE;AAAA,UACKqC,MADL,oBACKA,MADL;AAEVrB,MAAAA,OAAO,CAACrB,gBAAgB,CAACK,KAAD,EAAQqC,MAAR,EAAgBvC,MAAhB,CAAjB,CAAP;AACD;AACF;;AAEDG,EAAAA,iBAAiB,wEACf;AAAA;AAAA;AAAA;AAAA;AACE,gBACEgB,aAAa,SAAb,IAAAA,aAAa,WAAb,IAAAA,aAAa,CAAEjB,KAAf,IACAiB,aADA,aACAA,aADA,eACAA,aAAa,CAAEoB,MADf,IAEAvB,MAAM,CAACwB,OAFP,IAGAzB,gBAAgB,CAACyB,OAJnB,EAKE;AACA;AACA5C,cAAAA,aAAa,CACXoB,MAAM,CAACwB,OADI,EAEXzB,gBAAgB,CAACyB,OAFN,EAGXrB,aAHW,EAIXE,KAJW,EAKXE,MALW,CAAb;AAOD;;AAfH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GADe,IAkBf,GAlBe,EAmBf,CAACJ,aAAD,EAAgBE,KAAhB,EAAuBE,MAAvB,CAnBe,CAAjB;;AAsBA,WAASkB,uBAAT,GAAmC;AACjC,QAAIzC,MAAJ,EAAY;AACVyB,MAAAA,SAAS,CAACf,SAAD,CAAT;AACD,KAFD,MAEO,IAAIM,MAAM,CAACwB,OAAX,EAAoB;AAAA,4BACCxB,MAAM,CAACwB,OADR;AAAA,UACjBtC,KADiB,mBACjBA,KADiB;AAAA,UACVqC,MADU,mBACVA,MADU;AAEzBd,MAAAA,SAAS,CAAC,KAAK,CAAN,CAAT;AACAP,MAAAA,OAAO,CAACrB,gBAAgB,CAACK,KAAD,EAAQqC,MAAR,EAAgB,KAAK,CAArB,CAAjB,CAAP;AACD;AACF;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,+BACH;AAAK,UAAA,SAAS,EAAC,gIAAf;AAAA,kCACC;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,MAAM,EAAC,SAA1B;AAAoC,YAAA,QAAQ,EAAEb,YAA9C;AAA4D,YAAA,SAAS,EAAC,uCAAtE;AAA8G,YAAA,IAAI,EAAC;AAAnH;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAK,YAAA,SAAS,EAAC,+EAAf;AAAA,mCACC;AAAK,cAAA,SAAS,EAAC,eAAf;AAAA,sCACC;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AAAM,gBAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADG;AAAA;AAAA;AAAA;AAAA,cADF,eAYF;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,gCACC,QAAC,GAAD;AAAA,kCACC,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACC;AAAA,sCACC;AAAO,gBAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,EAAE,EAAC,aADJ;AAEC,gBAAA,IAAI,EAAC,QAFN;AAGC,gBAAA,IAAI,EAAC,KAHN;AAIC,gBAAA,KAAK,EAAEL,KAJR;AAKC,gBAAA,QAAQ,EAAE,CAACR,MALZ;AAMC,gBAAA,QAAQ,EAAE,kBAACc,CAAD;AAAA,yBAAOL,QAAQ,CAACoB,MAAM,CAACf,CAAC,CAACC,MAAF,CAASe,KAAV,CAAP,CAAf;AAAA;AANX;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBADD,eAcC,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACC;AAAA,sCACC;AAAO,gBAAA,OAAO,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,EAAE,EAAC,cADJ;AAEC,gBAAA,IAAI,EAAC,QAFN;AAGC,gBAAA,KAAK,EAAEpB,MAHR;AAIC,gBAAA,QAAQ,EAAE,CAACV,MAJZ;AAKC,gBAAA,QAAQ,EAAE,kBAACc,CAAD;AAAA,yBACTH,SAAS,CAACoB,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcD,IAAI,CAACE,GAAL,CAAS,CAAC,GAAV,EAAeJ,MAAM,CAACf,CAAC,CAACC,MAAF,CAASe,KAAV,CAArB,CAAd,CAAD,CADA;AAAA;AALX;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBAdD,eA4BC,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACC;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,sCACC;AAAG,yBAAM,MAAT;AAAA,uCAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhB;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AAAO,yBAAM,eAAb;AAAA,wCACC;AACC,kBAAA,IAAI,EAAC,UADN;AAEC,kBAAA,OAAO,EAAE3C,MAFV;AAGC,kBAAA,OAAO,EAAEyC;AAHV;AAAA;AAAA;AAAA;AAAA,wBADD,eAMC;AAAM,2BAAM;AAAZ;AAAA;AAAA;AAAA;AAAA,wBAND;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBA5BD;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eA2CC,QAAC,GAAD;AAAA,kCACC,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,sBACE,CAAC,CAAC5B,MAAF,iBACA,QAAC,SAAD;AACC,cAAA,IAAI,EAAEI,IADP;AAEC,cAAA,QAAQ,EAAE,kBAAC8B,CAAD,EAAIC,WAAJ;AAAA,uBAAoB9B,OAAO,CAAC8B,WAAD,CAA3B;AAAA,eAFX;AAGC,cAAA,UAAU,EAAE,oBAACC,CAAD;AAAA,uBAAO7B,gBAAgB,CAAC6B,CAAD,CAAvB;AAAA,eAHb;AAIC,cAAA,MAAM,EAAEjD,MAJT;AAAA,qCAMC;AACC,gBAAA,GAAG,EAAEgB,MADN;AAEC,gBAAA,GAAG,EAAC,SAFL;AAGC,gBAAA,GAAG,EAAEH,MAHN;AAIC,gBAAA,KAAK,EAAE;AAAEqC,kBAAAA,SAAS,kBAAW7B,KAAX,sBAA4BE,MAA5B;AAAX,iBAJR;AAKC,gBAAA,MAAM,EAAEc;AALT;AAAA;AAAA;AAAA;AAAA;AAND;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBADD,eAmBC,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACC;AAAA,wBACE,CAAC,CAAClB,aAAF,iBACA;AACC,gBAAA,GAAG,EAAEJ,gBADN;AAEC,gBAAA,KAAK,EAAE;AACNoC,kBAAAA,MAAM,EAAE,iBADF;AAENC,kBAAAA,SAAS,EAAE,SAFL;AAGNlD,kBAAAA,KAAK,EAAEiB,aAAa,CAACjB,KAHf;AAINqC,kBAAAA,MAAM,EAAEpB,aAAa,CAACoB;AAJhB;AAFR;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBAnBD;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3CD;AAAA;AAAA;AAAA;AAAA;AAAA,cAZE;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAgGD;;IA9JQ3B,a;UA8BPT,iB;;;KA9BOS,a;AAgKT,eAAeA,aAAf","sourcesContent":["import React, { useState, useRef, useEffect, DependencyList } from 'react'\nimport ReactCrop, {\n  centerCrop,\n  makeAspectCrop,\n  Crop,\n  PixelCrop,\n} from 'react-image-crop'\nimport {\n  Input,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport { canvasPreview } from './canvasPreview'\n\nimport 'react-image-crop/dist/ReactCrop.css'\n\n// This is to demonstate how to make and center a % aspect crop\n// which is a bit trickier so we use some helper functions.\nfunction centerAspectCrop(mediaWidth, mediaHeight, aspect) {\n  return centerCrop(\n    makeAspectCrop(\n      {\n        unit: '%',\n        width: 90,\n      },\n      aspect,\n      mediaWidth,\n      mediaHeight,\n    ),\n    mediaWidth,\n    mediaHeight,\n  )\n}\n\nfunction useDebounceEffect(fn, waitTime, deps) {\n  useEffect(() => {\n    const t = setTimeout(() => {\n      fn.apply(undefined, deps)\n    }, waitTime)\n\n    return () => {\n      clearTimeout(t)\n    }\n  }, deps)\n}\n\nfunction ImageUploader() {\n  const [imgSrc, setImgSrc] = useState('')\n  const previewCanvasRef = useRef(null)\n  const imgRef = useRef(null)\n  const [crop, setCrop] = useState()\n  const [completedCrop, setCompletedCrop] = useState()\n  const [scale, setScale] = useState(1)\n  const [rotate, setRotate] = useState(0)\n  const [aspect, setAspect] = useState(16 / 9)\n\t\n\t// Useful resource: https://bbbootstrap.com/snippets/image-drag-and-drop-upload-using-tailwind-css-remove-option-76647320#\n\n  function onSelectFile(e) {\n    if (e.target.files && e.target.files.length > 0) {\n      setCrop(undefined) // Makes crop preview update between images.\n      const reader = new FileReader()\n      reader.addEventListener('load', () =>\n        setImgSrc(reader.result?.toString() || ''),\n      )\n      reader.readAsDataURL(e.target.files[0])\n    }\n  }\n\n  function onImageLoad(e) {\n    if (aspect) {\n      const { width, height } = e.currentTarget\n      setCrop(centerAspectCrop(width, height, aspect))\n    }\n  }\n\n  useDebounceEffect(\n    async () => {\n      if (\n        completedCrop?.width &&\n        completedCrop?.height &&\n        imgRef.current &&\n        previewCanvasRef.current\n      ) {\n        // We use canvasPreview as it's much faster than imgPreview.\n        canvasPreview(\n          imgRef.current,\n          previewCanvasRef.current,\n          completedCrop,\n          scale,\n          rotate,\n        )\n      }\n    },\n    100,\n    [completedCrop, scale, rotate],\n  )\n\n  function handleToggleAspectClick() {\n    if (aspect) {\n      setAspect(undefined)\n    } else if (imgRef.current) {\n      const { width, height } = imgRef.current\n      setAspect(16 / 9)\n      setCrop(centerAspectCrop(width, height, 16 / 9))\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"Crop-Controls\">\n        <div className=\"p-3 md:w-auto rounded-md\">\n\t\t\t\t\t<div className=\"h-32 w-full overflow-hidden relative shadow-md border-2 items-center rounded-md cursor-pointer   border-gray-400 border-dotted\">\n\t\t\t\t\t\t<input type=\"file\" accept=\"image/*\" onChange={onSelectFile} className=\"h-full w-full opacity-0 z-10 absolute\" name=\"files[]\" />\n\t\t\t\t\t\t<div className=\"h-full w-full bg-gray-200 absolute z-1 flex justify-center items-center top-0\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-folder-open text-[30px] text-gray-400 text-center\"></i>\n\t\t\t\t\t\t\t\t<span className=\"text-[12px]\">{`Drag and Drop a file`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"pl-lg-4\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md=\"4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label htmlFor=\"scale-input\">Scale: </label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid=\"scale-input\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\t\t\t\tvalue={scale}\n\t\t\t\t\t\t\t\t\tdisabled={!imgSrc}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setScale(Number(e.target.value))}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col md=\"4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label htmlFor=\"rotate-input\">Rotate: </label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid=\"rotate-input\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tvalue={rotate}\n\t\t\t\t\t\t\t\t\tdisabled={!imgSrc}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetRotate(Math.min(180, Math.max(-180, Number(e.target.value))))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col md=\"4\">\n\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t<p class=\"mb-2\"><small>Aspect Ratio</small></p>\n\t\t\t\t\t\t\t\t<label class=\"custom-toggle\">\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \n\t\t\t\t\t\t\t\t\t\tchecked={aspect}\n\t\t\t\t\t\t\t\t\t\tonClick={handleToggleAspectClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span class=\"custom-toggle-slider rounded-circle\"></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md=\"6\">\n\t\t\t\t\t\t\t{!!imgSrc && (\n\t\t\t\t\t\t\t\t<ReactCrop\n\t\t\t\t\t\t\t\t\tcrop={crop}\n\t\t\t\t\t\t\t\t\tonChange={(_, percentCrop) => setCrop(percentCrop)}\n\t\t\t\t\t\t\t\t\tonComplete={(c) => setCompletedCrop(c)}\n\t\t\t\t\t\t\t\t\taspect={aspect}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tref={imgRef}\n\t\t\t\t\t\t\t\t\t\talt=\"Crop me\"\n\t\t\t\t\t\t\t\t\t\tsrc={imgSrc}\n\t\t\t\t\t\t\t\t\t\tstyle={{ transform: `scale(${scale}) rotate(${rotate}deg)` }}\n\t\t\t\t\t\t\t\t\t\tonLoad={onImageLoad}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ReactCrop>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col md=\"6\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{!!completedCrop && (\n\t\t\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\t\t\tref={previewCanvasRef}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tborder: '1px solid black',\n\t\t\t\t\t\t\t\t\t\t\tobjectFit: 'contain',\n\t\t\t\t\t\t\t\t\t\t\twidth: completedCrop.width,\n\t\t\t\t\t\t\t\t\t\t\theight: completedCrop.height,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n      </div>\n\t\t</div>\n  )\n}\n\nexport default ImageUploader;"]},"metadata":{},"sourceType":"module"}